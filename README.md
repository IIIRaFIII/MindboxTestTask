# Тестовое задание

## Задача №1:

Напишите на C# библиотеку для поставки внешним клиентам, которая умеет вычислять площадь круга по радиусу и треугольника
по трем сторонам. Дополнительно к работоспособности оценим:

<ul>
<li>Юнит-тесты</li>
<li>Легкость добавления других фигур</li>
<li>Вычисление площади фигуры без знания типа фигуры в compile-time</li>
<li>Проверку на то, является ли треугольник прямоугольным</li>
</ul>

## Задача №2:

Одному продукту может соответствовать много категорий, в одной категории может быть много продуктов. Напишите SQL запрос
для выбора всех пар «Имя продукта – Имя категории». Если у продукта нет категорий, то его имя все равно должно выводиться.

# Реализация
<ul>
<li>FigureArea/FigureAreaLibrary - библиотека</li>
<li>FigureArea/FigureAreaConsole - консольное приложение с примерами использования</li>
<li>FigureArea/FigureAreaLibrary.Tests - тесты</li>
</ul>

## **1. Добавление новой фигуры**

Чтобы добавить новую фигуру в библиотеку, выполните следующие шаги:

### **1. Реализуйте класс фигуры**
Создайте новый класс, который реализует интерфейс `IFigure`.

### 2. Создайте фабрику

Фабрика отвечает за создание объектов фигуры. Для каждой новой фигуры нужно создать отдельную фабрику, которая наследуется от базового класса `FigureFactory`. 

В фабрике необходимо реализовать:
- **`ExpectedParameterCount`** — указывает, сколько параметров требуется для создания фигуры.
- **`TryParseFigureParameters`** — проверяет, являются ли входные параметры корректными.
- **`CreateFigure`** — создает объект фигуры на основе проверенных параметров.

---

### 3. Добавьте валидацию фигуры через Visitor

В библиотеке используется паттерн **Visitor** для проверки параметров фигур после их создания. Этот подход отделяет логику проверки от самих фигур, делая их более универсальными.

Для каждой новой фигуры необходимо:
1. Добавить метод валидации в класс `FigureValidationVisitor`.
2. Убедиться, что ваш класс фигуры поддерживает этот валидатор через метод `Accept`.

**`FigureValidationVisitor`:**
- Этот класс проверяет, являются ли параметры фигуры корректными, после того как объект уже создан фабрикой.
- Он обеспечивает единый механизм проверки для всех фигур в библиотеке.

---

## Автоматическая регистрация фабрик

Библиотека поддерживает автоматическую регистрацию всех фабрик с использованием рефлексии. Это упрощает добавление новых фигур, так как вам не нужно вручную регистрировать каждую новую фабрику.

Для автоматической регистрации используйте метод `RegisterAllFactories`, который находит и регистрирует все фабрики, унаследованные от `FigureFactory`, в вашем проекте.


### **Реализацию DependencyInjection посчитал избыточной для тестового задания, поэтому выбрал именно рефлексию**
---

## Работа с фигурами, принимающими одинаковое количество параметров

В библиотеке предусмотрена возможность обработки нескольких фигур, принимающих одинаковое количество параметров. Это реализовано через механизм фабрик и метод `GetMatchingFactory`, который возвращает список всех подходящих фабрик для заданного количества параметров.

---


1. **Определение фабрик:**
   - Метод `GetMatchingFactory` ищет фабрики, у которых свойство `ExpectedParameterCount` соответствует количеству введенных параметров.

2. **Валидация параметров:**
   - Параметры проверяются на соответствие требованиям каждой фабрики. Если параметры валидны для нескольких фигур, возвращается список всех подходящих фабрик.
   - Если параметры не проходят валидацию, возвращаются подробные ошибки для каждой фабрики.

3. **Создание фигур:**
   - После выбора подходящей фабрики из списка, через метод `CreateFigure` создается объект фигуры.

---

### Пример работы с одинаковым количеством параметров

#### Поддерживаемые фигуры:
1. **Прямоугольник**
   - **Параметры:** длина и ширина.
   - **Фабрика:** `RectangleFactory`.

2. **Овал**
   - **Параметры:** длины полуосей.
   - **Фабрика:** `EllipseFactory`.

## Поддержка фигур с одинаковым количеством параметров — это важное преимущество библиотеки, которое позволяет:

- Упростить добавление новых фигур.
- Сократить объем ручной работы при добавлении новых типов.
- Предоставить пользователю возможность выбора подходящей фигуры при совпадении параметров.


# Задача №2

## Решение

### Структура базы данных
Для выполнения задачи была создана следующая структура базы данных:

- **Таблица `Products`:**
  - `id` — идентификатор продукта.
  - `name` — название продукта.

- **Таблица `Category`:**
  - `id` — идентификатор категории.
  - `name` — название категории.

- **Таблица `Products_Category`:**
  - `product_id` — идентификатор продукта (внешний ключ к `Products`).
  - `category_id` — идентификатор категории (внешний ключ к `Category`).

    ## products_categories.sql
